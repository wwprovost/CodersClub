<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" >

<head>
  <meta
    http-equiv="content-type"
    content="text/html; charset=utf-8"
  />
  <title>Allegro</title>
  <link rel="stylesheet" type="text/css" href="css/allegro.css" />
  <script src="../jquery/jquery.js" ></script>
  <script src="../jquery/jquery-ui.min.js" ></script>
  <script src="../blockly/blockly_compressed.js" ></script>
  <script src="../blockly/blocks_compressed.js" ></script>
  <script src="../blockly/acorn_interpreter.js" ></script>
  <script src="../blockly/javascript_compressed.js" ></script>
  <script src="../blockly/msg/js/en.js" ></script>
</head>

<body>

  <div id="controls" >
    <div style="margin-top: 8px;" >
      <span style="float: right;" >
      <input
        id="back"
        type="button"
        class="button"
        value="Back"
        onclick="window.location.href=previousPage();"
      />
      <input
        id="next"
        type="button"
        class="button"
        value="Next"
        onclick="window.location.href=nextPage();"
      />
      </span>
    </div>
    <div class="inset" >
      <div id="allegro" ><em>allegro</em></div>
      <p style="margin-bottom: 0;" >Today's musical selection:</p>
      <p style="margin-top: 0; padding-left: 1em;" ><strong id="title" ></strong></p>
      <p>
        <input
          type="button"
          class="button"
          style="width: 100%";
          id="sample"
          value="Play sample"
        />
      </p>
    </div>
    <div>
      <input
        type="range"
        id="volume"
        min="0"
        max="100"
        value="75"
      />
    </div>
    <p>
      <input
        type="button"
        class="button"
        style="width: 100%";
        id="start"
        value="Run program"
      />
    </p>
    <p>
      <input
        type="button"
        class="button"
        style="width: 100%";
        id="stop"
        value="Stop"
      />
    </p>
    <div class="explainer" >
      <p>The melody here is known as "Ode To Joy," the most familiar theme from Beethoven's 9th Symphony.</p>
      <p>This will be a more complex program, because some phrases repeat exactly but some <em>almost</em> repeat but really are different phrases. Also, look for ways to build longer phrases from smaller ones, as the starter code shows. The main program so far is just the two blocks at the lower right.</p>
    </div>
    <p>
      <input type="button" id="reset" value="Reset" />
    </p>
  </div>

  <div id="code" >
  </div>
  <div id="error" >
  </div>

  <div id="toolboxBase" style="display: none">
    <xml>
      <block type="duration_quarter"></block>
      <block type="duration_eighth"></block>
      <block type="allegro_play"></block>
      <block type="allegro_rest"></block>
      <block type="allegro_up"></block>
      <block type="allegro_down"></block>
      <block type="allegro_play_and_up"></block>
      <block type="allegro_play_and_down"></block>
      <block type="controls_repeat"></block>
      <block type="procedures_defnoreturn"></block>
      <more_blocks></more_blocks>
    </xml>
  </div>

  <div id="callBlockTemplate" style="display: none">
    <block type="procedures_callnoreturn">
      <mutation name="PROCEDURE_NAME"></mutation>
    </block>
  </div>

  <div id="sampleCode" style="display: none;" >

    up(2);

    play(.25);
    play(.25);
    up(1);
    play(.25);
    up(1);
    play(.25);

    play(.25);
    down(1);
    play(.25);
    down(1);
    play(.25);
    down(1);
    play(.25);
    down(1);

    play(.25);
    play(.25);
    up(1);
    play(.25);
    up(1);
    play(.25);

    play(.375);
    down(1);
    play(.125);
    play(.25);
    rest(.25);
    up(1);

    play(.25);
    play(.25);
    up(1);
    play(.25);
    up(1);
    play(.25);

    play(.25);
    down(1);
    play(.25);
    down(1);
    play(.25);
    down(1);
    play(.25);
    down(1);

    play(.25);
    play(.25);
    up(1);
    play(.25);
    up(1);
    play(.25);

    down(1);
    play(.375);
    down(1);
    play(.125);
    play(.25);
    rest(.25);
    up(1);

    play(.25);
    play(.25);
    up(1);
    play(.25);
    down(2);
    play(.25);
    up(1);

    play(.25);
    up(1);
    play(.125);
    up(1);
    play(.125);
    down(1);
    play(.25);
    down(2);
    play(.25);
    up(1);

    play(.25);
    up(1);
    play(.125);
    up(1);
    play(.125);
    down(1);
    play(.25);
    down(1);
    play(.25);
    down(1);

    play(.25);
    up(1);
    play(.25);
    down(4);
    play(.25);
    rest(.25);
    up(5);

    play(.25);
    play(.25);
    up(1);
    play(.25);
    up(1);
    play(.25);

    play(.25);
    down(1);
    play(.25);
    down(1);
    play(.25);
    down(1);
    play(.25);
    down(1);

    play(.25);
    play(.25);
    up(1);
    play(.25);
    up(1);
    play(.25);

    down(1);
    play(.375);
    down(1);
    play(.125);
    play(.25);
    rest(.25);
    up(1);

  </div>

  <div id="sampleBlocks" style="display: none;" >
    <xml xmlns="http://www.w3.org/1999/xhtml"><variables></variables><block type="procedures_defnoreturn" id="=tnP{kv(+pv[=?I4IU?S" x="20" y="25"><field name="NAME">1123</field><statement name="STACK"><block type="allegro_play" id="3umM(w|`-kF?QXriBku5"><value name="duration"><block type="duration_quarter" id="d5cK)Hb-Mf@0rS,Dlerg"><field name="value">0.25</field></block></value><next><block type="allegro_play_and_up" id="m@Gl5Ap9Wul8?^kG6-w]"><field name="steps">1</field><value name="duration"><block type="duration_quarter" id="Qkx|L.GZbej~=myqGbX^"><field name="value">0.25</field></block></value><next><block type="allegro_play_and_up" id="xL8?XT~#tdTOJ|7.~h;2"><field name="steps">1</field><value name="duration"><block type="duration_quarter" id="l2,DJq$WE.$JMx2(^Pai"><field name="value">0.25</field></block></value>
    <next><block type="allegro_play" id="Xrj2?mV_v/2i-(ZJ98IE"><value name="duration"><block type="duration_quarter" id="o6/!r{=t:|yZ9%M)TK_Y"><field name="value">0.25</field></block></value></block></next></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="kLZ#=-+$c+o2I(Tu7*ty" x="339" y="23"><field name="NAME">up and down</field><statement name="STACK"><block type="procedures_callnoreturn" id="F-X$/pV[p3yM|;6[~g6t"><mutation name="1123"></mutation><next><block type="procedures_callnoreturn" id="qf$0px`ZHb7*jk)pJ+?Y"><mutation name="4321"></mutation><next><block type="allegro_down" id="V7aCNmat2tz9b|RHL.$x"><field name="steps">1</field><next><block type="procedures_callnoreturn" id="DgB$@}^]x}k]MBdNb_vM"><mutation name="1123"></mutation></block></next></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="d)CBY}9^s`vARTVd[^v;" x="22" y="211"><field name="NAME">4321</field><statement name="STACK"><block type="allegro_play_and_down" id="uY^WIj^9r$t5Zt(H)7Qf"><field name="steps">1</field><value name="duration"><block type="duration_quarter" id="mOHux!+^TMz|$s(A4#y?"><field name="value">0.25</field></block></value><next><block type="allegro_play_and_down" id="BwKE/[QtN~5iJ[[jQoT7"><field name="steps">1</field><value name="duration"><block type="duration_quarter" id="mn!Nn;azy^L4={dXt:m)"><field name="value">0.25</field></block></value><next><block type="allegro_play_and_down" id="XfZ1300]Ffz,k7nDrhNr"><field name="steps">1</field><value name="duration"><block type="duration_quarter" id="_u@Q-s`lzD1ghPl,AuO1"><field name="value">0.25</field></block></value><next><block type="allegro_play" id="Ll:7?H}qb{.?v^I%8(k="><value name="duration"><block type="duration_quarter" id="mM7p36-zl{r8rC-W!66n"><field name="value">0.25</field></block></value></block></next></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="D5!]:]$dW8k7^dD+tqEP" x="344" y="201"><field name="NAME">first line</field><statement name="STACK"><block type="procedures_callnoreturn" id="IDoKO7O4M;DUnoY/E{R,"><mutation name="up and down"></mutation><next><block type="procedures_callnoreturn" id="}6!im^y][h99^_VB}aJA"><mutation name="211"></mutation></block></next></block></statement></block><block type="procedures_defnoreturn" id="3(%N4,?5[v8zDB}OpFOv" x="22" y="412"><field name="NAME">211</field><statement name="STACK"><block type="allegro_play_and_down" id="XY3`fTFC~_zrtB0dGqHE"><field name="steps">1</field><value name="duration"><block type="duration_quarter" id="`3wO$cJj{{z3/tFrA~Y#"><field name="value">0.375</field></block></value><next><block type="allegro_play" id="4oPS`O+lJkU7..@GJ2h|"><value name="duration"><block type="duration_eighth" id="#mu+]{Wp2k3=tp{jmxoo"><field name="value">0.125</field></block></value><next><block type="allegro_play" id="+8]M*4-I*0xVUvyL6FIc"><value name="duration"><block type="duration_quarter" id="tbC-,R:t!Y.@G?*Q?szM"><field name="value">0.25</field></block></value><next><block type="allegro_rest" id="9_Lif?u6]+La(sHHOIqb"><value name="duration"><block type="duration_quarter" id="J1.Zu5q}2Fu;U{b}:-+O"><field name="value">0.25</field></block></value></block></next></block></next></block></next></block></statement></block><block type="allegro_up" id="%vVJ*dj!$N%oRYjl84iI" x="345" y="510"><field name="steps">2</field><next><block type="procedures_callnoreturn" id="Ff_LMf?]s:fI_IjdKz$M"><mutation name="first line"></mutation></block></next></block></xml>
  </div>

  <script type="module" crossorigin="use-credentials" >
    import { Allegro } from "./js/allegro.js";

    $(document).ready(function()
      {
        var allegro = new Allegro("Ode To Joy", true).showSample();

        $("#reset").click(function(ev)
          {
            allegro.showSample();
          });
      });
  </script>

</body>

</html>
